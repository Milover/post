# run file template
- input: # Salon, et al. 2007, fig 21
    file: "data/salon_ac.stokes.2007/fig_21/raw/tau_w.csv"
    fields: [phase, tauWBar]
    format: dat
  output:
    - type: csv
      type_spec:
        directory: outdir
        file: dns_salon_2007_tau_w_bar.csv
- input: # cycle average tauWBar at probe location
    file: "data/postProcessing.LES/cont.probes/0/tauWBar"
    fields: [time, tauWBar]
    format: dat
  process:
    - type: filter
      type_spec:
        aggregation:
        filters:
          - field: time
            op: '>'
            value: 19.999999999999
    - type: average-cycle
      type_spec:
        n_cycles: 20
        time_field: time
        time_precision: 1e-10
    - type: expression
      type_spec:
        expression: '180*time'
        result: phase
  output:
#    - type: ram
#      type_spec:
#        name: wale_tau_w_bar_avg
    - type: csv
      type_spec:
        directory: outdir
        file: wale_tau_w_bar_avg.csv
  graph:
    type: tex
    graphs:
      - name: tau_w_bar_avg.tex
        template_dir:
        template_main:
        template_delims: ['__{','}__']
        directory: outdir
        table_file: 'outdir/wale_tau_w_bar_avg.csv'
        axes:
          - x:
              min: 0
              max: 180
              label: '$\phi$, (deg.)'
            y:
              min: 0
              max: 2.5
              label: '$\tau_\text{w} / \rho U_0 (2\nu\omega)^{\frac{1}{2}}$'
            tables:
              - x_field: phase
                y_field: tauWBar
                legend_entry: 'WALE'
              - x_field: phase
                y_field: tauWBar
                legend_entry: 'DNS'
                table_file: 'outdir/dns_salon_2007_tau_w_bar.csv'
